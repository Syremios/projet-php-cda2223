name: phpstan-analysis
run-name: ${{ github.actor }} is running phpstan
on: [push]
jobs:
  test:
    runs-on: ubuntu-latest    
    steps:
        - uses: actions/checkout@v3
        - name: Setup PHP
          uses: shivammathur/setup-php@v2
          with:
            php-version: 8.1
        - name: run phpstan
          run:  php ./vendor/bin/phpstan analyse projet --level 1
  build:
    need: test 
    runs-on: ubuntu-latest      
    steps:
      - run: echo "Build app image"

  deploy:
    need: [test,build] 
    runs-on: ubuntu-latest      
    steps:
      - run: echo "Deploy project"